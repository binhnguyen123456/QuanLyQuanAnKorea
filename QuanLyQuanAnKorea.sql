CREATE DATABASE QuanLyQuanAnKorea
USE QuanLyQuanAnKorea


CREATE TABLE MONAN
(
	MAMONAN NVARCHAR(20) NOT NULL,
	TENMONAN NVARCHAR(50),
	SOLUONG INT,
	MALOAIMONAN NVARCHAR(20),
	DONGIA MONEY,
	
)
ALTER TABLE MONAN ADD CONSTRAINT PK_MONAN PRIMARY KEY (MAMONAN)

CREATE TABLE LOAIMONAN
(
	MALOAIMONAN NVARCHAR(20) NOT NULL,
	TENLOAIMONAN NVARCHAR(50)
)
ALTER TABLE LOAIMONAN ADD CONSTRAINT PK_LOAIMONAN PRIMARY KEY (MALOAIMONAN)

CREATE TABLE LOAIKHACHHANG
(
	MALOAIKH NVARCHAR(20) NOT NULL,
	TENLOAIKH NVARCHAR(50)
)
ALTER TABLE LOAIKHACHHANG ADD CONSTRAINT PK_LOAIKHACHHANG PRIMARY KEY (MALOAIKH)

CREATE TABLE KHACHHANG
(
	MAKH NVARCHAR(20) NOT NULL,
	TENKH NVARCHAR(20),
	NGAYSINH NVARCHAR(100),
	GIOITINH NVARCHAR(20),
	SDT NVARCHAR(20),
	DIACHI NVARCHAR(50),
	MALOAIKH NVARCHAR(20) NOT NULL
)
ALTER TABLE KHACHHANG ADD CONSTRAINT PK_KHACHHANG PRIMARY KEY (MAKH)

CREATE TABLE NHANVIEN
(
	MANV NVARCHAR(20) NOT NULL,
	TENNV NVARCHAR(50),
	NGAYSINH NVARCHAR(100),
	GIOITINH NVARCHAR(20),
	SDT NVARCHAR(20),
	DIACHI NVARCHAR (50),
	NGAYVAOLAM DATE,
	MACV NVARCHAR (20),
	MATKHAU NVARCHAR(20)
)

ALTER TABLE NHANVIEN ADD CONSTRAINT PK_NHANVIEN PRIMARY KEY (MANV)

CREATE TABLE HOADON
(
	MAHD NVARCHAR(20) NOT NULL,
	MANV NVARCHAR(20),
	MAKH NVARCHAR(20),
	NGAYLAPHD DATE,
	TONGTIEN MONEY
)
ALTER TABLE HOADON ADD CONSTRAINT PK_HOADON PRIMARY KEY (MAHD)

CREATE TABLE CHITIETHD
(
	MACTHD  NVARCHAR(20) NOT NULL,
	MAHD NVARCHAR(20) NOT NULL,
	MAMONAN NVARCHAR(20) NOT NULL,
	SOLUONG INT,
	TONGTIEN MONEY
)
ALTER TABLE CHITIETHD ADD CONSTRAINT PK_CHITIETHDBAN PRIMARY KEY (MACTHD)

CREATE TABLE CHUCVU
(
MACV NVARCHAR(20) NOT NULL,
TENCV NVARCHAR(20)
)
ALTER TABLE CHUCVU ADD CONSTRAINT PK_CHUCVU PRIMARY KEY (MACV)


ALTER TABLE HOADON ADD FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH) 
ALTER TABLE HOADON ADD FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
ALTER TABLE NHANVIEN ADD FOREIGN KEY (MACV) REFERENCES CHUCVU(MACV)
ALTER TABLE KHACHHANG ADD FOREIGN KEY (MALOAIKH) REFERENCES LOAIKHACHHANG(MALOAIKH) 
ALTER TABLE CHITIETHD ADD FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD)
ALTER TABLE CHITIETHD ADD FOREIGN KEY (MAMONAN) REFERENCES MONAN(MAMONAN)
ALTER TABLE MONAN ADD FOREIGN KEY (MALOAIMONAN) REFERENCES LOAIMONAN(MALOAIMONAN)


insert into LOAIMONAN values
('L01', N'Cơm'),
('L02', N'Mì - Miến'),
('L03', N'Lẩu - Soup'),
('L04', N'Tokbokki'),
('L05', N'Kimbap - Trứng cuộn')
GO

insert into MONAN values
('MA001', N'Lẩu Hải Sản Kim Chi', 100, 'L03', '150000'),
('MA002', N'Cơm Bulgogi', 120, 'L01', '50000'),
('MA003', N'Cơm trộn kim chi', 150, 'L01', '50000'),
('MA004', N'Kimbab Cá Ngừ', 100, 'L05', '42000'),
('MA005', N'Trứng cuộn cơm', 130, 'L05', '42000'),
('MA006', N'Tokbokki Ramen Phômai', 170, 'L04', '55000'),
('MA007', N'Miến Japchae Cay', 170, 'L02', '55000'),
('MA008', N'Mì Jajang', 120, 'L02', '55000'),
('MA009', N'Mì Bibim Guksu', 140, 'L02', '62000'),
('MA010', N'Súp Rong Biển', 120, 'L03', '42000')
GO


insert into LOAIKHACHHANG values
('LKH01', N'Khách Hàng Thường'),
('LKH02', N'Khách Hàng Thân Thiết')
GO

SET DATEFORMAT DMY
insert into KHACHHANG values
('KH01', N'Nguyễn Thái Bình', '04/07/2002', N'Nữ', '09213927675', N'113 Lạc Long Quân, phường 10, Tân Bình', 'LKH01'),
('KH02', N'Lê Tấn Đạt', '14/05/1997', N'Nam', '0847582957', N'1 Nguyễn Quý Anh, phường Tân Sơn Nhì, Tân Phú', 'LKH02'),
('KH03', N'Nguyễn Đình Huy', '11/12/2002', N'Nam', '0294758471', N'199 Lê Trọng Tấn, Tân Phú', 'LKH02'),
('KH04', N'Cao Nhật Ánh Dương', '22/05/2000', N'Nữ', '0348957571', N'134/66 Tân Chánh Hiệp, Quận 12', 'LKH01')
GO

insert into CHUCVU values
('QL', N'Quản Lý'),
('NV', N'Nhân Viên')
GO

SET DATEFORMAT DMY
insert into NHANVIEN values
('NV01', N'Nguyễn Tùng Lâm', '16/04/1999', N'Nam', '0475827465', N'29A Luong Minh Nguyện, Tân Thới Hòa, Tân Phú', '22/9/2022', 'QL','1'),
('NV02', N'Đào Bá Dương', '15/09/2000', N'Nam', '0984737826', N'29A Luong Minh Nguyện, Tân Thới Hòa, Tân Phú', '21/10/2022', 'NV','1'),
('NV03', N'Hồ Huy Hùng', '16/09/2002', N'Nam', '0982765146', N'77 Tân Quý, Tân Phú', '7/1/2023', 'NV','1')
GO

SET DATEFORMAT DMY
insert into HOADON values
('HD01', 'NV02', 'KH04', '17/04/2023', '165000'),
('HD02', 'NV01', 'KH02', '19/04/2023', '450000'),
('HD03', 'NV02', 'KH03', '25/04/2023', '124000'),
('HD04', 'NV02', 'KH01', '29/04/2023', '210000')
GO

insert into CHITIETHD values
('CTHD01', 'HD01', 'MA006', 3, '165000'),
('CTHD02', 'HD02', 'MA001', 3, '450000'),
('CTHD03', 'HD03', 'MA009', 2, '124000'),
('CTHD04', 'HD04', 'MA005', 5, '210000')
GO


